{% extends "base_email.html" %}

{% block title %}We Miss You, {{ client_first_name }}! Special Offer Inside{% endblock %}

{% block content %}
<div class="greeting">
    We miss you, {{ client_first_name }}! 💈
</div>

<div class="main-text">
    It's been {% if last_visit_date %}{{ ((current_date | todatetime) - (last_visit_date | todatetime)).days }} days since your last visit{% else %}a while since we've seen you{% endif %}, and your chair at {{ barbershop_name }} is feeling a bit lonely.
</div>

<div class="highlight-box" style="background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%); color: #1a1a1a; text-align: center;">
    <h3 style="margin-bottom: 15px;">🎁 Welcome Back Gift</h3>
    <div class="offer-badge" style="background: #1a1a1a; color: #d4af37; font-size: 18px;">
        {{ discount_offer | default("20% OFF YOUR COMEBACK VISIT") }}
    </div>
    <p style="margin: 15px 0; font-weight: bold;">
        Use code: <strong>COMEBACK20</strong>
    </p>
    <p style="font-size: 14px; color: #666;">
        Valid until {{ expiry_date | default("the end of this month") }}
    </p>
</div>

<div class="main-text">
    We know life gets busy, but you deserve to look and feel your absolute best. Whether it's been a few weeks or a few months, we're here to get you back to looking sharp and feeling confident.
</div>

<div class="highlight-box">
    <h3 style="color: #1a1a1a; margin-bottom: 15px;">✨ What's New Since Your Last Visit</h3>
    <ul style="list-style: none; padding: 0;">
        <li style="margin: 12px 0; padding-left: 25px; position: relative;">
            <span style="position: absolute; left: 0; color: #d4af37;">🆕</span>
            New signature beard balm with premium ingredients
        </li>
        <li style="margin: 12px 0; padding-left: 25px; position: relative;">
            <span style="position: absolute; left: 0; color: #d4af37;">🏆</span>
            Award-winning hot towel treatment upgrade
        </li>
        <li style="margin: 12px 0; padding-left: 25px; position: relative;">
            <span style="position: absolute; left: 0; color: #d4af37;">📱</span>
            Enhanced online booking with reminder system
        </li>
        <li style="margin: 12px 0; padding-left: 25px; position: relative;">
            <span style="position: absolute; left: 0; color: #d4af37;">👔</span>
            Extended evening hours for busy professionals
        </li>
    </ul>
</div>

<div class="testimonial">
    "I came back after 6 months away and was blown away by the new services. The team remembered exactly how I like my cut and made me feel like I never left. Best decision to come back!"
    <div class="testimonial-author">- James M., Returning Client</div>
</div>

<div class="main-text">
    Your favorite barber is still here, and they remember exactly how you like your cut. We've been keeping your preferences on file, so when you're ready to return, we'll pick up right where we left off.
</div>

<div class="highlight-box" style="background: #f8f9fa; border-left: 4px solid #d4af37;">
    <h3 style="color: #1a1a1a; margin-bottom: 15px;">🎯 Quick Reminder: Your Usual Service</h3>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <strong>Last Service:</strong>
            <p style="margin: 5px 0; color: #666;">{{ last_service | default("Signature cut & beard trim") }}</p>
            <strong>Preferred Time:</strong>
            <p style="margin: 5px 0; color: #666;">{{ preferred_time | default("Weekday evenings") }}</p>
        </div>
        <div>
            <strong>Your Barber:</strong>
            <p style="margin: 5px 0; color: #666;">{{ preferred_barber | default("Any of our master barbers") }}</p>
            <strong>Average Visit:</strong>
            <p style="margin: 5px 0; color: #666;">{{ average_duration | default("45 minutes") }}</p>
        </div>
    </div>
</div>

<div style="text-align: center; margin: 30px 0;">
    <a href="#" class="cta-button">Book Your Comeback Appointment</a>
</div>

<div class="services-grid">
    <div class="service-item">
        <div class="service-icon">⚡</div>
        <div class="service-name">Express Cut</div>
        <div style="font-size: 12px; color: #666; margin-top: 5px;">Perfect for busy schedules</div>
    </div>
    <div class="service-item">
        <div class="service-icon">🔥</div>
        <div class="service-name">The Full Experience</div>
        <div style="font-size: 12px; color: #666; margin-top: 5px;">Complete refresh package</div>
    </div>
    <div class="service-item">
        <div class="service-icon">🧔</div>
        <div class="service-name">Beard Revival</div>
        <div style="font-size: 12px; color: #666; margin-top: 5px;">Get your beard back on track</div>
    </div>
    <div class="service-item">
        <div class="service-icon">✨</div>
        <div class="service-name">Style Consultation</div>
        <div style="font-size: 12px; color: #666; margin-top: 5px;">Free with any service</div>
    </div>
</div>

<div class="contact-info">
    <h3>Ready to Come Back?</h3>
    <div class="contact-item">📞 Call us: (555) 123-4567</div>
    <div class="contact-item">💻 Book online: www.sixfigurebarber.com</div>
    <div class="contact-item">💬 Text "COMEBACK" to get your discount</div>
    <div class="contact-item" style="margin-top: 15px; font-weight: bold; color: #1a1a1a;">
        Same-day appointments often available
    </div>
</div>

<div class="main-text" style="margin-top: 30px; text-align: center; font-style: italic; color: #666;">
    Your chair is waiting, {{ client_first_name }}.
    Come back and let us remind you why you chose us in the first place.
</div>
{% endblock %}
