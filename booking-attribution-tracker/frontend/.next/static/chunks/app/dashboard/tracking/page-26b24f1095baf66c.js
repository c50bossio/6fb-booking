(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{619:function(e,s,t){Promise.resolve().then(t.bind(t,5369))},5369:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return I}});var a=t(7437),l=t(2265),i=t(6070),n=t(2869),r=t(5974),c=t(297),o=t(3022),d=t(7500),m=t(7533),x=t(2208),h=t(9202),u=t(1047),g=t(4401),j=t(3388),p=t(9897),f=t(5302),v=t(5131),N=t(2252),b=t(9227),w=t(3276),y=t(2735),k=t(5805),_=t(1239),Z=t(1723),S=t(3774),M=t(7168);function I(){var e;let[s,t]=(0,l.useState)(!0),[I,O]=(0,l.useState)("all"),[L,D]=(0,l.useState)("all"),[A,C]=(0,l.useState)([]),{data:F,isLoading:Y}=(0,c.GB)(),{data:P,isLoading:T,error:E}=(0,c.NI)((null==F?void 0:null===(e=F[0])||void 0===e?void 0:e.id)||""),z=P&&P.length>0?P:A;(0,l.useEffect)(()=>{C([{id:1,type:"click",platform:"Facebook",campaign_name:"Summer Promo",customer_identifier:"user_***789",timestamp:new Date(Date.now()-3e4).toISOString(),location:"New York, NY",device:"mobile",url:"/booking/haircut",ip_hash:"192.168.***",status:"tracked",conversion_potential:.78},{id:2,type:"impression",platform:"Google",campaign_name:"Local SEO",customer_identifier:"user_***456",timestamp:new Date(Date.now()-45e3).toISOString(),location:"Los Angeles, CA",device:"desktop",url:null,ip_hash:"10.0.***",status:"tracked",conversion_potential:.65},{id:3,type:"booking",platform:"Website",campaign_name:null,customer_identifier:"user_***123",timestamp:new Date(Date.now()-12e4).toISOString(),location:"Chicago, IL",device:"mobile",url:"/book-appointment",ip_hash:"172.16.***",status:"converted",conversion_potential:1,booking_value:85},{id:4,type:"view",platform:"Instagram",campaign_name:"Brand Awareness",customer_identifier:"user_***234",timestamp:new Date(Date.now()-18e4).toISOString(),location:"Miami, FL",device:"mobile",url:"/gallery",ip_hash:"203.0.***",status:"tracked",conversion_potential:.45},{id:5,type:"click",platform:"Google",campaign_name:"Retargeting",customer_identifier:"user_***567",timestamp:new Date(Date.now()-24e4).toISOString(),location:"Austin, TX",device:"desktop",url:"/pricing",ip_hash:"198.51.***",status:"tracked",conversion_potential:.82}])},[]),(0,l.useEffect)(()=>{if(!s)return;let e=setInterval(()=>{if(Math.random()>.7){let e={id:Date.now(),type:["click","impression","view","booking"][Math.floor(4*Math.random())],platform:["Facebook","Google","Instagram","Website"][Math.floor(4*Math.random())],campaign_name:["Summer Promo","Local SEO","Brand Awareness","Retargeting"][Math.floor(4*Math.random())],customer_identifier:"user_***".concat(Math.floor(999*Math.random())),timestamp:new Date().toISOString(),location:["New York, NY","Los Angeles, CA","Chicago, IL"][Math.floor(3*Math.random())],device:["mobile","desktop","tablet"][Math.floor(3*Math.random())],url:["/booking","/services","/gallery","/pricing"][Math.floor(4*Math.random())],ip_hash:"".concat(Math.floor(255*Math.random()),".").concat(Math.floor(255*Math.random()),".***"),status:"tracked",conversion_potential:Math.random(),booking_value:Math.random()>.9?Math.floor(150*Math.random())+50:void 0};P&&0!==P.length||C(s=>[e,...s.slice(0,49)])}},3e3);return()=>clearInterval(e)},[s]);let G=z.filter(e=>{let s="all"===I||e.type===I,t="all"===L||e.platform===L;return s&&t}),R=e=>{switch(e){case"click":return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-blue-600"});case"impression":return(0,a.jsx)(x.Z,{className:"h-4 w-4 text-purple-600"});case"view":return(0,a.jsx)(h.Z,{className:"h-4 w-4 text-green-600"});case"booking":return(0,a.jsx)(u.Z,{className:"h-4 w-4 text-orange-600"});default:return(0,a.jsx)(g.Z,{className:"h-4 w-4 text-gray-600"})}},B=e=>{switch(e){case"mobile":case"tablet":return(0,a.jsx)(j.Z,{className:"h-3 w-3"});default:return(0,a.jsx)(p.Z,{className:"h-3 w-3"})}},W=e=>{switch(e){case"converted":return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-600"});case"tracked":return(0,a.jsx)(g.Z,{className:"h-4 w-4 text-blue-600"});case"failed":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(N.Z,{className:"h-4 w-4 text-yellow-600"})}},Q=e=>{switch(e){case"Facebook":return"bg-blue-100 text-blue-800";case"Google":return"bg-red-100 text-red-800";case"Instagram":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},U=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600";return Y||T?(0,a.jsx)(o.kI,{}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Real-Time Tracking"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor live interactions and booking activity"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.z,{variant:s?"default":"outline",size:"sm",onClick:()=>t(!s),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Pause Tracking"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Resume Tracking"]})}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Export Data"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Live Interactions"}),(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:z.length.toLocaleString()}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),P?"Live":"Demo"]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Active Users"}),(0,a.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:34}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently browsing"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Conversions Today"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:z.filter(e=>"booking"===e.type).length}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:[z.length>0?(z.filter(e=>"booking"===e.type).length/z.length*100).toFixed(1):0,"% rate"]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Top Source"}),(0,a.jsx)(_.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-sm font-bold",children:"Facebook Ads"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leading traffic source"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Avg Session"}),(0,a.jsx)(Z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:"2m 34s"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Duration"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Bounce Rate"}),(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[42.8,"%"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Single page visits"})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:"Filters"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:I,onChange:e=>O(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"impression",children:"Impressions"}),(0,a.jsx)("option",{value:"click",children:"Clicks"}),(0,a.jsx)("option",{value:"view",children:"Page Views"}),(0,a.jsx)("option",{value:"booking",children:"Bookings"})]}),(0,a.jsxs)("select",{value:L,onChange:e=>D(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Platforms"}),(0,a.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,a.jsx)("option",{value:"Google",children:"Google"}),(0,a.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,a.jsx)("option",{value:"Website",children:"Website"})]}),(0,a.jsxs)(r.C,{variant:"secondary",children:[G.length," interactions"]}),(0,a.jsx)("div",{className:"flex items-center ml-auto",children:s&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live tracking active"]})})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-lg",children:"Live Interaction Feed"}),(0,a.jsx)(i.SZ,{children:"Real-time tracking of ad interactions and website activity"})]}),(0,a.jsx)(i.aY,{children:T?(0,a.jsx)(d.o,{text:"Loading interactions..."}):G.length>0?(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:G.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[R(e.type),W(e.status)]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium capitalize",children:e.type}),(0,a.jsx)(r.C,{className:Q(e.platform),children:e.platform}),e.campaign_name&&(0,a.jsx)(r.C,{variant:"secondary",className:"text-xs",children:e.campaign_name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-600 mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(k.Z,{className:"mr-1 h-3 w-3"}),e.customer_identifier]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.Z,{className:"mr-1 h-3 w-3"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center",children:[B(e.device),(0,a.jsx)("span",{className:"ml-1 capitalize",children:e.device})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z.Z,{className:"mr-1 h-3 w-3"}),new Date(e.timestamp).toLocaleTimeString()]})]}),e.url&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,a.jsx)(h.Z,{className:"inline mr-1 h-3 w-3"}),e.url]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-medium ".concat(U(e.conversion_potential)),children:[Math.round(100*e.conversion_potential),"% potential"]}),e.booking_value&&(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:["$",e.booking_value.toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.ip_hash})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No interactions found"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Interactions will appear here when tracking is active"}),E&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-2",children:"Error loading interactions"})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-lg",children:"Attribution Processing Queue"}),(0,a.jsx)(i.SZ,{children:"Interactions waiting for attribution processing"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"23"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Attribution"})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"156"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Processed Today"})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:"1.2s"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Processing Time"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Next processing in: ",(0,a.jsx)("span",{className:"font-medium",children:"45 seconds"})]}),(0,a.jsxs)(n.z,{size:"sm",variant:"outline",children:[(0,a.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Process Now"]})]})]})]})]})}}},function(e){e.O(0,[216,592,971,744],function(){return e(e.s=619)}),_N_E=e.O()}]);