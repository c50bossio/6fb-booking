(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{8120:function(e,s,i){Promise.resolve().then(i.bind(i,6435))},6435:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return v}});var t=i(7437),a=i(2265),n=i(6070),l=i(2869),c=i(5974),r=i(2339),d=i(2735),o=i(7168),m=i(8896),x=i(5302),h=i(5252),u=i(1723),j=i(5805),f=i(2208),p=i(1047),g=i(3639);let b=[{id:1,booking_id:"bk_001",customer_identifier:"cust_***789",campaign_name:"Facebook - Summer Promo",platform:"Facebook",attribution_model:"first_touch",confidence_score:.95,booking_value:85,ad_spend:12.5,roi:580,interaction_count:3,attribution_window:7,created_at:"2024-01-15T10:30:00Z",booking_date:"2024-01-22T14:00:00Z",interaction_details:[{type:"impression",timestamp:"2024-01-15T10:30:00Z",platform:"Facebook"},{type:"click",timestamp:"2024-01-15T10:32:15Z",platform:"Facebook"},{type:"view",timestamp:"2024-01-15T10:45:30Z",platform:"Website"}]},{id:2,booking_id:"bk_002",customer_identifier:"cust_***456",campaign_name:"Google Ads - Local SEO",platform:"Google",attribution_model:"last_touch",confidence_score:.87,booking_value:125,ad_spend:8.75,roi:1328.6,interaction_count:5,attribution_window:14,created_at:"2024-01-14T16:20:00Z",booking_date:"2024-01-20T11:30:00Z",interaction_details:[{type:"impression",timestamp:"2024-01-14T16:20:00Z",platform:"Google"},{type:"click",timestamp:"2024-01-14T16:22:10Z",platform:"Google"},{type:"view",timestamp:"2024-01-14T16:35:45Z",platform:"Website"},{type:"click",timestamp:"2024-01-19T09:15:30Z",platform:"Google"},{type:"view",timestamp:"2024-01-19T09:18:15Z",platform:"Website"}]},{id:3,booking_id:"bk_003",customer_identifier:"cust_***123",campaign_name:"Instagram - Brand Awareness",platform:"Instagram",attribution_model:"linear",confidence_score:.73,booking_value:65,ad_spend:15.2,roi:327.6,interaction_count:2,attribution_window:7,created_at:"2024-01-13T14:15:00Z",booking_date:"2024-01-18T16:45:00Z",interaction_details:[{type:"impression",timestamp:"2024-01-13T14:15:00Z",platform:"Instagram"},{type:"click",timestamp:"2024-01-13T14:18:30Z",platform:"Instagram"}]}],N=[{range:"90-100%",count:89,percentage:38},{range:"80-89%",count:67,percentage:28.6},{range:"70-79%",count:45,percentage:19.2},{range:"60-69%",count:23,percentage:9.8},{range:"50-59%",count:10,percentage:4.3}];function v(){let[e,s]=(0,a.useState)(null),[i,v]=(0,a.useState)("all"),[_,y]=(0,a.useState)(!1),w="all"===i?b:b.filter(e=>e.attribution_model===i),k=async()=>{y(!0),setTimeout(()=>{y(!1)},3e3)},Z=e=>e>=.9?"bg-green-100 text-green-800":e>=.8?"bg-blue-100 text-blue-800":e>=.7?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",C=e=>{switch(e){case"first_touch":return"bg-purple-100 text-purple-800";case"last_touch":return"bg-blue-100 text-blue-800";case"linear":return"bg-green-100 text-green-800";case"time_decay":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Attribution Analysis"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Detailed attribution results and confidence analysis"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(l.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,t.jsx)(l.z,{onClick:k,disabled:_,size:"sm",children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Attributions"}),(0,t.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:234}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12% from last week"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Avg Confidence"}),(0,t.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[82.4,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"High confidence rate"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Attributed Revenue"}),(0,t.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["$","18750"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["From ",234," bookings"]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Avg Time to Convert"}),(0,t.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[4.2," days"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Conversion window analysis"})]})]})]}),(0,t.jsxs)(r.mQ,{defaultValue:"attributions",className:"space-y-6",children:[(0,t.jsxs)(r.dr,{children:[(0,t.jsx)(r.SP,{value:"attributions",children:"Attribution Results"}),(0,t.jsx)(r.SP,{value:"confidence",children:"Confidence Analysis"}),(0,t.jsx)(r.SP,{value:"models",children:"Model Performance"})]}),(0,t.jsxs)(r.nU,{value:"attributions",className:"space-y-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-lg",children:"Filters"})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("select",{value:i,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"all",children:"All Models"}),(0,t.jsx)("option",{value:"first_touch",children:"First Touch"}),(0,t.jsx)("option",{value:"last_touch",children:"Last Touch"}),(0,t.jsx)("option",{value:"linear",children:"Linear"}),(0,t.jsx)("option",{value:"time_decay",children:"Time Decay"})]}),(0,t.jsxs)(c.C,{variant:"secondary",children:[w.length," results"]})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{className:"text-lg",children:"Attribution Results"}),(0,t.jsx)(n.SZ,{children:"Detailed breakdown of booking attributions with confidence scores"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>s(e),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsxs)("h4",{className:"font-medium text-gray-900",children:["Booking ",e.booking_id]}),(0,t.jsx)(c.C,{className:C(e.attribution_model),children:e.attribution_model.replace("_"," ")}),(0,t.jsxs)(c.C,{className:Z(e.confidence_score),children:[Math.round(100*e.confidence_score),"% confidence"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Campaign:"}),(0,t.jsx)("div",{children:e.campaign_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Booking Value:"}),(0,t.jsxs)("div",{className:"text-green-600 font-medium",children:["$",e.booking_value.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Ad Spend:"}),(0,t.jsxs)("div",{children:["$",e.ad_spend.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"ROI:"}),(0,t.jsxs)("div",{className:"text-green-600 font-medium",children:[e.roi.toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center text-xs text-gray-500 space-x-4",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(j.Z,{className:"mr-1 h-3 w-3"}),e.customer_identifier]}),(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(f.Z,{className:"mr-1 h-3 w-3"}),e.interaction_count," interactions"]}),(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(p.Z,{className:"mr-1 h-3 w-3"}),new Date(e.booking_date).toLocaleDateString()]})]})]}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})]})},e.id))})})]})]}),(0,t.jsxs)(r.nU,{value:"confidence",className:"space-y-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{className:"text-lg",children:"Confidence Score Distribution"}),(0,t.jsx)(n.SZ,{children:"Distribution of attribution confidence scores across all results"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:N.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-16 text-sm font-medium",children:e.range}),(0,t.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2 max-w-xs",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.percentage,"%")}})})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.count}),(0,t.jsxs)("span",{children:["(",e.percentage,"%)"]})]})]},s))})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-lg",children:"Confidence Insights"})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,t.jsx)(x.Z,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"High Confidence (80%+)"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[N[0].count+N[1].count," attributions (",(N[0].percentage+N[1].percentage).toFixed(1),"%) have high confidence scores, indicating strong attribution accuracy."]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,t.jsx)(g.Z,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Review Needed (60-79%)"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[N[2].count+N[3].count," attributions may benefit from additional data collection or model refinement."]})]})]})})]})]}),(0,t.jsx)(r.nU,{value:"models",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{className:"text-lg",children:"Attribution Model Performance"}),(0,t.jsx)(n.SZ,{children:"Comparison of different attribution models and their effectiveness"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-6",children:["first_touch","last_touch","linear","time_decay"].map(e=>{let s=b.filter(s=>s.attribution_model===e),i=s.reduce((e,s)=>e+s.confidence_score,0)/s.length||0,a=s.reduce((e,s)=>e+s.booking_value,0),n=s.reduce((e,s)=>e+s.roi,0)/s.length||0;return(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(c.C,{className:C(e),children:e.replace("_"," ")}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[s.length," attributions"]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-lg font-semibold",children:[Math.round(100*i),"% avg confidence"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Revenue:"}),(0,t.jsxs)("div",{className:"font-medium text-green-600",children:["$",a.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Avg ROI:"}),(0,t.jsxs)("div",{className:"font-medium",children:[n.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Usage:"}),(0,t.jsxs)("div",{className:"font-medium",children:[(s.length/b.length*100).toFixed(1),"%"]})]})]})]},e)})})})]})})]}),e&&(0,t.jsxs)(n.Zb,{className:"fixed inset-0 z-50 m-8 overflow-auto",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(n.ll,{children:["Attribution Details - ",e.booking_id]}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>s(null),children:"Close"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Attribution Info"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Model:"}),(0,t.jsx)(c.C,{className:C(e.attribution_model),children:e.attribution_model.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Confidence:"}),(0,t.jsxs)(c.C,{className:Z(e.confidence_score),children:[Math.round(100*e.confidence_score),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Window:"}),(0,t.jsxs)("span",{children:[e.attribution_window," days"]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Financial Impact"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Booking Value:"}),(0,t.jsxs)("span",{className:"font-medium text-green-600",children:["$",e.booking_value.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Ad Spend:"}),(0,t.jsxs)("span",{children:["$",e.ad_spend.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ROI:"}),(0,t.jsxs)("span",{className:"font-medium text-green-600",children:[e.roi.toFixed(1),"%"]})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Interaction Timeline"}),(0,t.jsxs)("div",{className:"space-y-3",children:[e.interaction_details.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e.type})," on ",e.platform]}),(0,t.jsx)("div",{className:"text-gray-500",children:new Date(e.timestamp).toLocaleString()})]},s)),(0,t.jsxs)("div",{className:"flex items-center space-x-3 text-sm border-t pt-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("span",{className:"font-medium",children:"Booking Completed"})}),(0,t.jsx)("div",{className:"text-gray-500",children:new Date(e.booking_date).toLocaleString()})]})]})]})]})})]})]})}}},function(e){e.O(0,[216,592,971,744],function(){return e(e.s=8120)}),_N_E=e.O()}]);