(()=>{var e={};e.id=171,e.ids=[171],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7452:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(598),t(3321),t(8990),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,598)),"/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/dashboard/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3321)),"/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8990)),"/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/dashboard/analytics/page.tsx"],m="/dashboard/analytics/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/analytics/page",pathname:"/dashboard/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2425:(e,s,t)=>{Promise.resolve().then(t.bind(t,612))},5408:(e,s,t)=>{Promise.resolve().then(t.bind(t,3925))},612:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(326),r=t(7577),n=t(3071),i=t(772),l=t(567),c=t(9210),d=t(6557);let o=(0,d.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),m=(0,d.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),x=(0,d.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var u=t(7202),h=t(1405),g=t(1540),p=t(5290),j=t(4659),f=t(3634),v=t(7069),b=t(3468),y=t(8998),N=t(8528);class w{static async getCampaignPerformance(e,s=30){return(await N.x1.get("/analytics/campaigns/performance",{params:{business_id:e,date_range_days:s}})).data.data}static async getCampaignDetails(e,s,t=30){return(await N.x1.get(`/analytics/campaigns/${e}/details`,{params:{business_id:s,date_range_days:t}})).data.data}static async getPlatformComparison(e,s=30){return(await N.x1.get("/analytics/platforms/comparison",{params:{business_id:e,date_range_days:s}})).data.data}static async getROITrends(e,s=30,t="daily"){return(await N.x1.get("/analytics/roi/trends",{params:{business_id:e,period_days:s,granularity:t}})).data.data}static async getDashboardSummary(e,s=7){return(await N.x1.get("/analytics/dashboard/summary",{params:{business_id:e,period_days:s}})).data.data}}let k={toMonthlyChart:e=>e.map(e=>({month:new Date(e.period).toLocaleDateString("en-US",{month:"short",year:"numeric"}),spend:e.spend,revenue:e.revenue,bookings:e.attributions,roi:e.roi_percentage})),toPlatformInsights:e=>e.map(e=>({platform:e.platform,spend:e.spend,revenue:e.revenue,bookings:e.attributions,roi:e.roi_percentage,trend:e.roi_percentage>250?"up":e.roi_percentage<150?"down":"stable",change:20*Math.random()-10,avgTimeToConvert:5*Math.random()+2,topDemographic:"Mixed Demographics"})),toPerformanceTrends:e=>({last30Days:{spend:{value:e.total_spend,change:20*Math.random()-10,trend:e.total_spend>1e3?"up":"down"},revenue:{value:e.total_revenue,change:20*Math.random()-10,trend:e.roi_percentage>200?"up":"down"},bookings:{value:e.total_attributions,change:20*Math.random()-10,trend:e.total_attributions>20?"up":"down"},roi:{value:e.roi_percentage,change:20*Math.random()-10,trend:e.roi_percentage>200?"up":"down"},avgBookingValue:{value:e.avg_booking_value,change:20*Math.random()-10,trend:e.avg_booking_value>75?"up":"down"}}})};class P extends Error{constructor(e,s,t){super(e),this.statusCode=s,this.originalError=t,this.name="AnalyticsAPIError"}}let Z=async(e,s)=>{try{return await e()}catch(e){if(console.error(`Analytics API Error (${s}):`,e),e.response?.status===401)throw new P("Authentication required. Please log in again.",401,e);if(e.response?.status===404)throw new P("Business or campaign not found.",404,e);if(e.response?.status>=500)throw new P("Server error. Please try again later.",e.response.status,e);throw new P(`Failed to ${s}. Please check your connection and try again.`,e.response?.status,e)}};var _=t(2576);let S={attributionModels:[{model:"First Touch",attributions:89,revenue:8250,confidence:.89},{model:"Last Touch",revenue:7890,attributions:76,confidence:.85},{model:"Linear",revenue:6420,attributions:58,confidence:.78},{model:"Time Decay",revenue:5670,attributions:45,confidence:.82}],customerJourney:{averageJourneyLength:4.2,averageInteractions:3.8,conversionPaths:[{path:"Facebook Ad → Website → Booking",count:45,percentage:34.1},{path:"Google Search → Website → Booking",count:38,percentage:28.8},{path:"Instagram → Facebook → Website → Booking",count:22,percentage:16.7},{path:"Facebook → Retargeting → Booking",count:18,percentage:13.6},{path:"Direct → Booking",count:9,percentage:6.8}],touchpointEffectiveness:[{touchpoint:"Facebook Ads",interactions:156,conversions:67,rate:42.9},{touchpoint:"Google Ads",interactions:134,conversions:48,rate:35.8},{touchpoint:"Instagram Ads",interactions:89,conversions:22,rate:24.7},{touchpoint:"Website Direct",interactions:67,conversions:19,rate:28.4},{touchpoint:"Email Marketing",interactions:45,conversions:12,rate:26.7}]}};function A(){let[e,s]=(0,r.useState)("30d"),[t,d]=(0,r.useState)("revenue"),{businessId:N}=function(){let[e,s]=(0,r.useState)(null);return{businessId:e,setBusinessId:(0,r.useCallback)(e=>{s(e),localStorage.setItem("current_business_id",e)},[])}}(),{data:A,loading:C,error:I,refetch:R}=function(e,s=30){let t=function(e,s=30){let[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null);return{data:t,loading:n,error:l,refetch:(0,r.useCallback)(async()=>{if(e){i(!0),c(null);try{let t=await Z(()=>w.getCampaignPerformance(e,s),"fetch campaign performance");a(t)}catch(e){e instanceof P?c(e.message):c("Failed to load campaign performance data")}finally{i(!1)}}},[e,s])}}(e,s),a=function(e,s=30){let[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null);return{data:t,loading:n,error:l,refetch:(0,r.useCallback)(async()=>{if(e){i(!0),c(null);try{let t=await Z(()=>w.getPlatformComparison(e,s),"fetch platform comparison");a(t)}catch(e){e instanceof P?c(e.message):c("Failed to load platform comparison data")}finally{i(!1)}}},[e,s])}}(e,s),n=function(e,s=30,t="daily"){let[a,n]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null);return{data:a,loading:i,error:c,refetch:(0,r.useCallback)(async()=>{if(e){l(!0),d(null);try{let a=await Z(()=>w.getROITrends(e,s,t),"fetch ROI trends");n(a)}catch(e){e instanceof P?d(e.message):d("Failed to load ROI trends data")}finally{l(!1)}}},[e,s,t])}}(e,s,"daily"),i=function(e,s=7){let[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null);return{data:t,loading:n,error:l,refetch:(0,r.useCallback)(async()=>{if(e){i(!0),c(null);try{let t=await Z(()=>w.getDashboardSummary(e,s),"fetch dashboard summary");a(t)}catch(e){e instanceof P?c(e.message):c("Failed to load dashboard summary data")}finally{i(!1)}}},[e,s])}}(e,Math.min(s,7)),l=t.loading||a.loading||n.loading||i.loading,c=t.error||a.error||n.error||i.error;return{data:{performanceTrends:t.data?k.toPerformanceTrends(t.data.summary):null,monthlyPerformance:n.data?k.toMonthlyChart(n.data.trends):[],platformInsights:a.data?k.toPlatformInsights(a.data.platforms):[],revenueInsights:t.data?{totalRevenue:t.data.summary.total_revenue,attributedRevenue:t.data.summary.total_revenue,attributionRate:88,revenueGrowth:15.7,averageBookingValue:t.data.summary.avg_booking_value,revenueBySource:[{source:"Attributed to Ads",amount:.88*t.data.summary.total_revenue,percentage:88},{source:"Direct/Organic",amount:.08*t.data.summary.total_revenue,percentage:8},{source:"Referral",amount:.04*t.data.summary.total_revenue,percentage:4}]}:null,insights:i.data?.insights||[],raw:{campaignPerformance:t.data,platformComparison:a.data,roiTrends:n.data,dashboardSummary:i.data}},loading:l,error:c,refetch:(0,r.useCallback)(async()=>{await Promise.all([t.refetch(),a.refetch(),n.refetch(),i.refetch()])},[t.refetch,a.refetch,n.refetch,i.refetch]),hooks:{campaignPerformance:t,platformComparison:a,roiTrends:n,dashboardSummary:i}}}(N,"7d"===e?7:"30d"===e?30:"90d"===e?90:365),O={...A,attributionModels:S.attributionModels,customerJourney:S.customerJourney},M=e=>{switch(e){case"up":return a.jsx(o,{className:"h-4 w-4 text-green-500"});case"down":return a.jsx(m,{className:"h-4 w-4 text-red-500"});default:return a.jsx(x,{className:"h-4 w-4 text-gray-500"})}},T=e=>{switch(e){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}};return C&&!A?a.jsx(_.F3,{text:"Loading analytics data..."}):I&&!A?(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive attribution and performance analytics"})]})}),a.jsx(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(u.Z,{className:"h-12 w-12 text-red-500 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Analytics"}),a.jsx("p",{className:"text-gray-600 mb-4 text-center",children:I}),(0,a.jsxs)(i.z,{onClick:R,children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive attribution and performance analytics"}),!N&&a.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"Please select a business to view analytics"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:e,onChange:e=>s(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",disabled:C,children:[a.jsx("option",{value:"7d",children:"Last 7 days"}),a.jsx("option",{value:"30d",children:"Last 30 days"}),a.jsx("option",{value:"90d",children:"Last 90 days"}),a.jsx("option",{value:"12m",children:"Last 12 months"})]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",disabled:C||!A?.raw?.campaignPerformance,children:[a.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"Export Report"]}),(0,a.jsxs)(i.z,{size:"sm",onClick:R,disabled:C,children:[C?a.jsx(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Refresh Data"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:O?.performanceTrends?.last30Days&&Object.entries(O.performanceTrends.last30Days).map(([e,s])=>(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(n.ll,{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),M(s.trend)]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["spend"===e||"revenue"===e||e.includes("Value")?"$":"","number"==typeof s.value?s.value.toLocaleString():s.value,"roi"===e?"%":""]}),(0,a.jsxs)("p",{className:`text-xs ${T(s.trend)}`,children:[s.change>0?"+":"",s.change,"% from last period"]})]})]},e))}),(0,a.jsxs)(c.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(c.dr,{children:[a.jsx(c.SP,{value:"overview",children:"Performance Overview"}),a.jsx(c.SP,{value:"attribution",children:"Attribution Analysis"}),a.jsx(c.SP,{value:"customer-journey",children:"Customer Journey"}),a.jsx(c.SP,{value:"revenue",children:"Revenue Insights"}),a.jsx(c.SP,{value:"trends",children:"Trends & Forecasting"})]}),(0,a.jsxs)(c.nU,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Monthly Performance Trends"}),a.jsx(n.SZ,{children:"Revenue, spend, and ROI trends over time"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-5 gap-4",children:(O?.monthlyPerformance||[]).map((e,s)=>(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"mb-2 text-xs text-gray-600",children:e.month}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"bg-blue-100 rounded h-20 flex items-end justify-center relative",children:[a.jsx("div",{className:"bg-blue-600 rounded w-full",style:{height:`${e.revenue/1e4*100}%`}}),(0,a.jsxs)("div",{className:"absolute bottom-1 text-xs text-white font-medium",children:["$",e.revenue/1e3,"k"]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revenue"})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"bg-red-100 rounded h-12 flex items-end justify-center relative",children:[a.jsx("div",{className:"bg-red-500 rounded w-full",style:{height:`${e.spend/4e3*100}%`}}),(0,a.jsxs)("div",{className:"absolute bottom-1 text-xs text-white font-medium",children:["$",e.spend/1e3,"k"]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Spend"})]}),(0,a.jsxs)("div",{className:"text-sm font-medium text-green-600",children:[e.roi,"% ROI"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.bookings," bookings"]})]},s))})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Platform Performance Comparison"}),a.jsx(n.SZ,{children:"Detailed performance metrics by advertising platform"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:(O?.platformInsights||[]).map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("h4",{className:"font-medium text-lg",children:e.platform}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[M(e.trend),(0,a.jsxs)("span",{className:`text-sm ${T(e.trend)}`,children:[e.change>0?"+":"",e.change,"%"]})]})]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-xl font-semibold text-green-600",children:[e.roi.toFixed(1),"% ROI"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Spend"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",e.spend.toFixed(0)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Revenue"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["$",e.revenue.toFixed(0)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Bookings"}),a.jsx("div",{className:"font-medium",children:e.bookings})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Time to Convert"}),(0,a.jsxs)("div",{className:"font-medium",children:[e.avgTimeToConvert," days"]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Top Demographic:"})," ",e.topDemographic]})]},s))})})]})]}),(0,a.jsxs)(c.nU,{value:"attribution",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Attribution Model Performance"}),a.jsx(n.SZ,{children:"Comparison of different attribution models"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:(O?.attributionModels||[]).map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium",children:e.model}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(l.C,{variant:"secondary",children:[Math.round(100*e.confidence),"% confidence"]}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:["$",e.revenue.toFixed(0)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:e.attributions})," attributions"]}),a.jsx("div",{children:"•"}),(0,a.jsxs)("div",{children:["Avg. revenue per attribution: ",(0,a.jsxs)("span",{className:"font-medium",children:["$",(e.revenue/e.attributions).toFixed(2)]})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.revenue/8250*100}%`}})})})]},s))})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Attribution Insights"}),a.jsx(n.SZ,{children:"Key insights and recommendations"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-green-600",children:[a.jsx(j.Z,{className:"mr-2 h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"High Attribution Accuracy"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"First Touch model shows highest confidence (89%) and revenue attribution, suggesting strong initial touchpoint impact."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-blue-600",children:[a.jsx(f.Z,{className:"mr-2 h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Optimization Opportunity"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Linear attribution shows lower performance, indicating potential for mid-journey touchpoint optimization."})]})]})})]})]}),(0,a.jsxs)(c.nU,{value:"customer-journey",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Journey Length"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-2",children:[O?.customerJourney?.averageJourneyLength||0," days"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Average time to conversion"})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Interactions"})}),(0,a.jsxs)(n.aY,{children:[a.jsx("div",{className:"text-3xl font-bold mb-2",children:O?.customerJourney?.averageInteractions||0}),a.jsx("p",{className:"text-sm text-gray-600",children:"Average touchpoints per journey"})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Top Path"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-lg font-bold mb-2",children:[O?.customerJourney?.conversionPaths?.[0]?.percentage||0,"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:O?.customerJourney?.conversionPaths?.[0]?.path||"No data available"})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Top Conversion Paths"}),a.jsx(n.SZ,{children:"Most common customer journey patterns"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:(O?.customerJourney?.conversionPaths||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:e.path}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.percentage}%`}})})]}),(0,a.jsxs)("div",{className:"ml-4 text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.percentage,"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.count," customers"]})]})]},s))})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Touchpoint Effectiveness"}),a.jsx(n.SZ,{children:"Conversion rates by marketing channel"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:(O?.customerJourney?.touchpointEffectiveness||[]).map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium",children:e.touchpoint}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:[e.rate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsxs)("div",{children:[e.interactions.toLocaleString()," interactions"]}),(0,a.jsxs)("div",{children:[e.conversions," conversions"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.rate>40?"bg-green-500":e.rate>30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.rate/50*100}%`}})})]},s))})})]})]}),(0,a.jsxs)(c.nU,{value:"revenue",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Total Revenue"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["$",O?.revenueInsights?.totalRevenue?.toFixed(0)||"0"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[a.jsx(o,{className:"h-4 w-4 mr-1"}),"+",O?.revenueInsights?.revenueGrowth||0,"% growth"]})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Attribution Rate"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-2",children:[O?.revenueInsights?.attributionRate?.toFixed(1)||0,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["$",O?.revenueInsights?.attributedRevenue?.toFixed(0)||"0"," attributed"]})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Avg Booking Value"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-2",children:["$",O?.revenueInsights?.averageBookingValue?.toFixed(2)||"0.00"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Per booking average"})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Revenue Attribution Breakdown"}),a.jsx(n.SZ,{children:"Revenue sources and attribution accuracy"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"space-y-4",children:(O?.revenueInsights?.revenueBySource||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:e.source}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:`h-3 rounded-full ${0===s?"bg-blue-600":1===s?"bg-green-500":"bg-yellow-500"}`,style:{width:`${e.percentage}%`}})})]}),(0,a.jsxs)("div",{className:"ml-4 text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.percentage.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["$",e.amount.toFixed(0)]})]})]},s))})})]})]}),(0,a.jsxs)(c.nU,{value:"trends",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Performance Trend Analysis"}),a.jsx(n.SZ,{children:"Key performance indicators and their trends"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Positive Trends"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(v.Z,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Revenue Growth"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Consistent month-over-month improvement"})]})]}),a.jsx("div",{className:"text-green-600 font-medium",children:"+15.7%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(b.Z,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Attribution Rate"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Improving attribution accuracy"})]})]}),a.jsx("div",{className:"text-green-600 font-medium",children:"88.0%"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Areas for Improvement"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(u.Z,{className:"h-5 w-5 text-yellow-600 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Instagram Performance"}),a.jsx("div",{className:"text-sm text-gray-600",children:"ROI below target threshold"})]})]}),a.jsx("div",{className:"text-yellow-600 font-medium",children:"207.7%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(y.Z,{className:"h-5 w-5 text-yellow-600 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Conversion Time"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Journey length could be optimized"})]})]}),a.jsx("div",{className:"text-yellow-600 font-medium",children:"4.2 days"})]})]})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"AI-Powered Recommendations"}),a.jsx(n.SZ,{children:"Data-driven suggestions to improve attribution performance"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:"Optimize Instagram Strategy"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Instagram shows the lowest ROI (207.7%) among platforms. Consider refining audience targeting, creative messaging, or budget allocation to improve performance."})]}),(0,a.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("h4",{className:"font-medium text-green-900",children:"Expand Facebook Success"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Facebook shows strong performance with 306.7% ROI and highest attribution confidence. Consider increasing budget allocation by 20-30% to maximize returns."})]}),(0,a.jsxs)("div",{className:"border-l-4 border-yellow-500 pl-4",children:[a.jsx("h4",{className:"font-medium text-yellow-900",children:"Implement Multi-Touch Attribution"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Linear attribution shows untapped potential. Implement time-decay or position-based models to better understand mid-journey touchpoint impact."})]}),(0,a.jsxs)("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("h4",{className:"font-medium text-purple-900",children:"Reduce Customer Journey Length"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Average conversion time is 4.2 days with 3.8 touchpoints. Optimize landing pages and implement retargeting to reduce friction and accelerate conversions."})]})]})})]})]})]})]})}},3925:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(326),r=t(5047),n=t(7577),i=t(434),l=t(7863),c=t(772),d=t(1813),o=t(5920),m=t(3468),x=t(7069),u=t(6464),h=t(6697),g=t(9513),p=t(4061),j=t(8378),f=t(4019),v=t(748),b=t(1810);let y=[{name:"Overview",href:"/dashboard",icon:o.Z,description:"Dashboard overview and key metrics"},{name:"Attribution",href:"/dashboard/attribution",icon:m.Z,description:"Attribution results and analysis"},{name:"Campaigns",href:"/dashboard/campaigns",icon:x.Z,description:"Campaign performance tracking"},{name:"Analytics",href:"/dashboard/analytics",icon:u.Z,description:"Detailed analytics and reports"},{name:"Tracking",href:"/dashboard/tracking",icon:h.Z,description:"Real-time interaction and booking data"},{name:"Integrations",href:"/dashboard/integrations",icon:g.Z,description:"Platform connections and setup"},{name:"Businesses",href:"/dashboard/businesses",icon:p.Z,description:"Manage your businesses"},{name:"Settings",href:"/dashboard/settings",icon:j.Z,description:"Account and attribution settings"}];function N({className:e}){let[s,t]=(0,n.useState)(!1),o=(0,r.usePathname)(),{user:x,logout:u}=(0,d.aC)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:a.jsx(c.z,{variant:"outline",size:"icon",onClick:()=>t(!s),className:"bg-white",children:s?a.jsx(f.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})})}),s&&a.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:()=>t(!1)}),a.jsx("div",{className:(0,l.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",s?"translate-x-0":"-translate-x-full lg:translate-x-0",e),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center px-6 py-4 border-b border-gray-200",children:[a.jsx(m.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"BookingBridge"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Attribution Platform"})]})]}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:y.map(e=>{let s=o===e.href||"/dashboard"!==e.href&&o.startsWith(e.href),r=e.icon;return(0,a.jsxs)(i.default,{href:e.href,onClick:()=>t(!1),className:(0,l.cn)("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",s?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a.jsx(r,{className:(0,l.cn)("mr-3 h-5 w-5 flex-shrink-0",s?"text-blue-600":"text-gray-400 group-hover:text-gray-500")}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:(0,l.cn)("font-medium",s?"text-blue-700":""),children:e.name}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:e.description})]})]},e.name)})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-blue-600 font-medium text-sm",children:[x?.first_name?.charAt(0),x?.last_name?.charAt(0)]})}),(0,a.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[x?.first_name," ",x?.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:x?.email})]})]}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{u(),t(!1)},className:"w-full justify-start",children:[a.jsx(b.Z,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})}var w=t(6507),k=t(5351),P=t(3634);function Z({title:e,description:s,action:t}){let{user:r}=(0,d.aC)();return a.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1",children:e&&(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),s&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[t,(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(c.z,{variant:"outline",size:"icon",className:"relative",children:[a.jsx(w.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full text-xs flex items-center justify-center text-white",children:"3"})]}),a.jsx(c.z,{variant:"outline",size:"icon",children:a.jsx(k.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(c.z,{size:"sm",className:"hidden sm:flex",children:[a.jsx(P.Z,{className:"mr-2 h-4 w-4"}),"Process Attribution"]})]})]})]})})}function _({children:e}){return"/dashboard/dev-login"===(0,r.usePathname)()?e:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(N,{}),a.jsx("div",{className:"lg:pl-64",children:(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[a.jsx(Z,{}),a.jsx("main",{className:"flex-1 px-6 py-6",children:e})]})})]})}let S=function(e){if("/dashboard/dev-login"===(0,r.usePathname)())return a.jsx(_,{...e});let s=(0,d.QO)(_);return a.jsx(s,{...e})}},2576:(e,s,t)=>{"use strict";t.d(s,{F3:()=>l,o:()=>c});var a=t(326),r=t(5290),n=t(7863);function i({size:e="md",text:s="Loading...",className:t}){return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center justify-center space-x-2",t),children:[a.jsx(r.Z,{className:(0,n.cn)("animate-spin",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e])}),s&&a.jsx("span",{className:"text-sm text-gray-600",children:s})]})}function l({text:e="Loading..."}){return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx(r.Z,{className:"w-8 h-8 animate-spin mx-auto text-blue-600"}),a.jsx("p",{className:"text-gray-600",children:e})]})})}function c({text:e="Loading..."}){return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(i,{text:e})})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(326);t(7577);var r=t(9360),n=t(7863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,n.cn)(i({variant:s}),e),...t})}},9210:(e,s,t)=>{"use strict";t.d(s,{SP:()=>d,dr:()=>c,mQ:()=>l,nU:()=>o});var a=t(326),r=t(7577),n=t(990),i=t(7863);let l=n.fC,c=r.forwardRef(({className:e,...s},t)=>a.jsx(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=n.aV.displayName;let d=r.forwardRef(({className:e,...s},t)=>a.jsx(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=n.xz.displayName;let o=r.forwardRef(({className:e,...s},t)=>a.jsx(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=n.VY.displayName},4659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5290:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/dashboard/analytics/page.tsx#default`)},3321:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/bossio/6fb-booking/booking-attribution-tracker/frontend/app/dashboard/layout.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[985,404,933,917],()=>t(7452));module.exports=a})();